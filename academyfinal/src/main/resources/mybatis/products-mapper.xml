<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="products">

  <!-- 상품 추가 -->
  <insert id="add">
    INSERT INTO products (
      product_no, product_name, product_detail,
      product_price, product_stock, product_created_at,
      category_no, brand, strength
    ) VALUES (
      #{productNo}, #{productName}, #{productDetail},
      #{productPrice}, #{productStock}, #{productCreatedAt},
      #{categoryNo}, #{brand}, #{strength}
    )
  </insert>

  <!-- 상품 조회 -->
  <select id="list" resultType="com.hiki.academyfinal.dto.ProductsDto">
    SELECT * FROM products
    ORDER BY product_no ASC
  </select>

  <!-- 상품 단일조회 -->
  <select id="find" resultType="com.hiki.academyfinal.dto.ProductsDto">
    SELECT * FROM products WHERE product_no = #{productNo}
  </select>

  <!-- 상품 삭제 -->
  <delete id="delete">
    DELETE FROM products WHERE product_no = #{productNo}
  </delete>

  <!-- 상품 수정 -->
  <update id="update">
    UPDATE products SET
      product_name = #{productName},
      product_detail = #{productDetail},
      product_price = #{productPrice},
      product_stock = #{productStock},
      brand = #{brand},
      strength = #{strength},
      category_no = #{categoryNo}
    WHERE product_no = #{productNo}
  </update>

  <!-- 시퀀스 -->
  <select id="sequence" resultType="int">
    SELECT products_seq.nextval FROM dual
  </select>

</mapper>
